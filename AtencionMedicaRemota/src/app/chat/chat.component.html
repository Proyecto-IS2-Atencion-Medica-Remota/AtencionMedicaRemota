<app-navbar-paciente *ngIf = "soy_paciente"></app-navbar-paciente>
<app-navbar-medico *ngIf = "soy_medico"></app-navbar-medico>

<div id="container">
    <aside>
        <ul>
        <section *ngIf = "soy_medico">
            <a  href="javascript:void(0);" *ngFor = "let i of contactos_pacientes.data; let j = index" (click)="setDestinatario(i.rut,j)">
                <li >
                    <div style="size:100%;" >
                        <h2>{{i.nombres}}</h2>
                        <h2>{{i.apellidos}}</h2>
                        <h3>{{i.rut}}</h3>
                        <h3>
                            <span class="status green"></span>
                            Conectado
                        </h3>
                    </div>
                </li>
            </a>
        </section>
        <section *ngIf = "soy_paciente">
            <a href="javascript:void(0);" *ngFor = "let i of contactos_medicos.data;let j = index" (click)="setDestinatario(i.rut,j)">
                <li >
                    <div style="size:100%;" >
                        <h2>{{i.nombres}}</h2>
                        <h2>{{i.apellidos}}</h2>
                        <h3>{{i.rut}}</h3>
                        <h3>
                            <span class="status green"></span>
                            Conectado
                        </h3>
                    </div>
                </li>
            </a>
            
        </section>

        </ul>
    </aside>

    <main>
        <header>
           
            
            <h2 class="titulo">{{hablando_con}}</h2>
            
        </header>

        
        <ul id="chat" #scrollMe>
            <section *ngFor = "let a of allmensajes" >
                <ng-template [ngIf] = "a.de_usuario === rut_url " [ngIfElse] = "TEST">
                    <li class="me"  >
                        <div class="message">
                            {{a.mensaje}}
                        </div>
                    </li>
                </ng-template>
                <ng-template #TEST>
                    <li class="you">
                        <div class="message">
                            {{a.mensaje}}
                        </div>
                    </li>
                </ng-template>
            </section>
        </ul>
        <footer>
            <button type="button" class="btn btn-success" *ngIf="hay_seleccionado" (click)="llamar()">
                <i class="fa fa-video-camera" style="height: 20%;"></i> Llamar</button>
                <button type="button" class="btn btn-danger" *ngIf="terminar_video" (click) = "terminar_llamada()">Terminar</button>
            <div class="container">
                
                <div class="row">

                    <input type="text" class="form-control" (change) = "misMensajes()" [(ngModel)]="userChat.text" > <button  *ngIf="hay_seleccionado" type="button" class="enviar" >
                        <i class="fa fa-paper-plane" ></i> Enviar</button>
                    
                    
                    
                </div>
            </div>

        </footer>
    </main>
</div>

 <div [id]="localCallId" class="local"></div>

 <div *ngFor="let callId of remoteCalls" [id]="callId" class="remote"></div>


